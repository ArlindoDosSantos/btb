{
    "collab_server" : "",
    "contents" : "# script testé et ok pour R v3.4.1 et v3.3.3\n\n################# initialisation ##############################################\ncat(\"\\f\")\nrm(list = ls())\nnomPackage <- \"btb_0.2.0.tar.gz\"  # penser à changer le fichier DESCRIPTION en même temps\nsetwd(\"D:/S3QCEA/programmation/R\")\n########################### suppression ancienne version ######################\nrequire(btb)\ndetach(package:btb, unload = TRUE)\nremove.packages(\"btb\")\n.rs.restartR()\n########################### modification du path ######################\n# DEBUT - à ne faire qu'une fois par session\n# pour R version devel\npathRtools <- paste(c(\"D:/Program_Files/Rtools/bin\"\n                      , \"D:/Program_Files/Rtools/mingw_64/bin\"\n                      , \"D:/Program_Files/miktex/texmfs/install/miktex/bin\"\n                      , \"D:/Program_Files/R/R-devel/bin/x64\"\n                      , \"C:/Windows\", \"c:/Windows/System32\"), collapse = \";\")\nSys.setenv(PATH = paste(pathRtools, Sys.getenv(\"PATH\"), sep = \";\"))\n# strsplit(Sys.getenv(\"PATH\"), \";\") # pour voir le contenu du PATH\n# FIN - à ne faire qu'une fois par session\n########################### chargement btb.dll en memoire #####################\n\n# instruction mise en commentaire car semble ne pas générer le fichier au format tel qu'il le faisait à l'époque de btb v0.1.14\n# Rcpp::compileAttributes(pkgdir = \"D:/S3QCEA/programmation/R/btb\", verbose = TRUE)  # constitution des fichiers de transfert de donnees R <=> C++  cf http://www.rdocumentation.org/packages/Rcpp/versions/0.12.6/topics/compileAttributes\n\nsystem(\"R CMD build btb\")                                                   # constitution du package (*.tar.gz)\ninstall.packages(nomPackage, repos = NULL, type = \"source\")                 # compilation du package (creation de btb.dll)\ndetach(\"package:btb\", unload = TRUE)\nrequire(btb)\ndata(reunion)\nreunionSmooth <- btb::kernelSmoothing(reunion, 100, 150)\n################### lancement des tests unitaires #############################\nrequire(RUnit)\nsource(\"D:/S3QCEA/programmation/R/btb/inst/testsUnitaires/run_tests.R\")\n################# check du package ############################################\nsystem(paste(\"r CMD check --as-cran\", nomPackage))\n\n# library(devtools)\n# detach(\"package:btb\", unload = TRUE)                                        # le package doit être détaché pour pouvoir effectuer le check\n# devtools::check(pkg = \"btb\")                                                # teste la validite du package\n\n# library(btb)                                                                # chargement de la dll en mémoire\n# library(codetools)\n# codetools::checkUsagePackage(\"btb\", all = TRUE)\n\n# system(\"R CMD del D:\\\\programmation\\\\R\\\\btb\\\\src\\\\btb.dll\")\n# system(\"R CMD del D:\\\\programmation\\\\R\\\\btb\\\\src\\\\rcppLissage.o\")\n# system(\"R CMD del D:\\\\programmation\\\\R\\\\btb\\\\src\\\\RcppExports.o\")\n# system(\"R CMD del D:\\\\programmation\\\\R\\\\btb\\\\src\\\\rcppLissageMedian.o\")\n\ntools::package_native_routine_registration_skeleton('btb',,,FALSE)\nliste_Rcpp <- do.call(c,tools::package_dependencies(\"Rcpp\", reverse = T))\ndesc_urls <- paste(\"http://cran.r-project.org/web/packages/\", liste_Rcpp[1:100], \"/DESCRIPTION\", sep = \"\")\ndesc <- lapply(desc_urls, function(x) read.dcf(url(x)))\npkg <- do.call(rbind,lapply(desc, function(x) x[, c(\"Package\",\"Date/Publication\")]))\n\npkg[pkg[,1] %in% liste_Rcpp,]\npkh <- recent.packages.rds()\npkgChange <- c(\"BigVAR\",\"Calculator.LR.FNs\",\"downsize\",\"EthSEQ\",\"goftest\",\"GSODR\",\"MCMCprecision\",\"mrbsizeR\",\"rospca\",\"scuba\",\"unitizer\",\"unix\",\"wikitaxa\")\npkgChange[pkgChange %in% liste_Rcpp]\n",
    "created" : 1493280959521.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1689589388",
    "id" : "D04BBAFA",
    "lastKnownWriteTime" : 1499179154,
    "last_content_update" : 1499179154537,
    "path" : "D:/S3QCEA/programmation/R/compiler package btb.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}